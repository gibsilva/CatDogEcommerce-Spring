<html layout:decorate="~{navbarComponent}">

    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Alterar Dados</title>
    </head>

    <body>
        <main layout:fragment="conteudo">
            <section class="">
                <div class="container formCadastroCliente">
                    <div class="card card-nav-tabs">
                        <div class="card-header card-header-primary">
                            <!-- colors: "header-primary", "header-info", "header-success", "header-warning", "header-danger" -->
                            <div class="nav-tabs-navigation">
                                <div class="nav-tabs-wrapper">
                                    <ul class="nav nav-tabs" data-tabs="tabs">
                                        <li class="nav-item">
                                            <a class="nav-link active show" href="#profile" data-toggle="tab">
                                                <i class="material-icons">face</i> Dados Pessoais
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="#messages" data-toggle="tab">
                                                <i class="material-icons">chat</i> Endereços
                                                <div class="ripple-container"></div></a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link " href="#settings" data-toggle="tab">
                                                <i class="material-icons">build</i> Cartões
                                                <div class="ripple-container"></div></a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="card-body ">
                            <div class="tab-content text-center">
                                <div class="tab-pane active show" id="profile">
                                    <form th:object="${cliente}" th:action="@{/cliente/alterar}" method="POST">
                                    	<input th:field="*{id}" type="hidden" id="id" name="id">
                                    	<input th:field="*{senha}" type="hidden" id="id" name="id">
                                        <h3>Dados Pessoais</h3>
                                        <div class="form-group row">
                                            <div class="" th:if="${#fields.hasAnyErrors()}">
                                                <div th:each="detailedError : ${#fields.detailedErrors()}">
                                                    <li class="text-danger"><span th:text="${detailedError.message}"></span></li>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-6">
                                                <div class="form-group">
                                                    <label for="nomeCompletoInput">Nome</label>
                                                    <input th:field="*{nome}" type="text" class="form-control" id="nome" name="nome" placeholder="Seu nome aqui" required>
                                                </div>
                                            </div>
                                        <div class="col-6">
                                                <div class="form-group">
                                                    <label for="nomeCompletoInput">Sobrenome</label>
                                                    <input th:field="*{sobrenome}" type="text" class="form-control" id="sobrenome" name="sobrenome" placeholder="Seu sobrenome aqui" required>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                           <div class="col-6">
                                                <div class="form-group">
                                                    <label for="cpfInput">CPF</label>
                                                    <input th:field="*{cpf}" type="text" class="form-control" id="cpf" name="cpf" placeholder="000.000.000-00" required>
                                                </div>
                                            </div> 
                                            <div class="col-6">
                                                <div class="form-group">
                                                    <label for="EmailInput">Email</label>
                                                    <input th:field="*{email}" type="email" class="form-control" id="email" name="email" placeholder="email@example.com" required>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                           <div class="col-6">
                                                <div class="form-group">
                                                    <label class="label-control">Data de Nascimento</label>
                                                    <input type="date" name="dataNasc" class="form-control" th:classappend="${#fields.hasErrors('dataNasc')}? is-invalid" id="dataNasc" placeholder="Data no formato yyyy-MM-dd" th:field="*{dataNasc}" th:max="${#dates.format(#dates.createNow(), 'yyyy-MM-dd')}">
                                                </div>
                                            </div>
                                            <div class="col-3">
                                                <div class="form-group">
                                                    <label for="celularInput">Celular</label>
                                                    <input th:field="*{celular}" type="text" class="form-control" id="celular" name="celular"  placeholder="(00)00000-0000" required>
                                                </div>
                                            </div>
                                            <div class="col-3">
                                                <div class="form-group">
                                                    <label for="telefoneInput">Telefone </label>
                                                    <input th:field="*{telefone}" type="text" class="form-control" id="telefone" name="telefone" placeholder="(00)0000-0000">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                           <div class="col-4">
                                                <div class="form-group">
                                                    <label for="sexoSelect">Sexo</label>
                                                    <select th:field="*{sexo}" class="form-control selectpicker" data-style="btn btn-link" id="sexo" name="sexo" required>
                                                        <option value="M" >Masculino</option>
                                                        <option value="F">Feminino</option>
                                                        <option value="O">Outro</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- 
                                        <div class="row">
                                            <div class="col-6">
                                                <div class="form-group">
                                                    <label for="senhaInput">Senha</label>
                                                    <input th:field="*{senha}" type="password" class="form-control" id="senha" name="senha" required>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="confirmarSenhaInput">Confirmar senha</label>
                                                    <input type="password" class="form-control" id="confirmarSenha" name="confirmarSenha" >
                                                </div>
                                            </div>
                                        </div>
                                        -->
                                        <div class="row ">
                                            <div class="col-md-3 text-center">
                                                <button type="submit" class="btn btn-round btn-primary btnCriarConta">Salvar</button>
                                            </div>
                                        </div>
                                    </form>

                                </div>
                                <div class="tab-pane" id="messages">
                                    <h3 >Endereço</h3>
                                    <div class="row">
                                        <div class="col-4">
                                            <div class="form-group">
                                                <label for="cepInput">CEP</label>
                                                <input  type="text" class="form-control" id="cep" name="cep" placeholder="00000-000">
                                            </div>
                                        </div>
                                        <div class="col-8">
                                            <div class="form-group">
                                                <label for="enderecoInput">Logradouro</label>
                                                <input  type="text" class="form-control" id="logradouro" name="logradouro" placeholder="Rua St, "
                                                        readonly >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-2">
                                            <div class="form-group">
                                                <label for="numeroInput">Número</label>
                                                <input  type="text" class="form-control" id="numero" name="numero" placeholder="1234"
                                                        >
                                            </div>
                                        </div>
                                        <div class="col-10">
                                            <div class="form-group">
                                                <label for="complementoInput">Complemento</label>
                                                <input  type="text" class="form-control" id="complemento" name="complemento" placeholder="Apto ***">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row"> 
                                        <div class="col-12">
                                            <div class="form-group">
                                                <label for="bairroInput">Bairro</label>
                                                <input  type="text" class="form-control" id="bairro" name="bairro" placeholder="Jd Maria"
                                                        readonly >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-6">
                                            <div class="form-group">
                                                <label for="EstadoSelect">Estado</label>
                                                <input  type="text" class="form-control" id="estado" name="estado" placeholder="SP"
                                                        readonly >
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="form-group">
                                                <label for="CidadeSelect">Cidade</label>
                                                <input  type="text" class="form-control" id="cidade" name="cidade" placeholder="São Paulo"
                                                        readonly >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row ">
                                        <div class="col-6 text-center">
                                            <button type="submit" class="btn btn-round btn-primary btnCriarConta">Salvar</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane " id="settings">
                                    <p>I think that’s a responsibility that I have, to push possibilities, to show people, this is the level that things could be at. So when you get something that has the name Kanye West on it, it’s supposed to be pushing the furthest possibilities. I will be the leader of a company that ends up being worth billions of dollars, because I got the answers. I understand culture. I am the nucleus.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <script
                src="https://code.jquery.com/jquery-3.4.1.min.js"
                integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
            crossorigin="anonymous"></script>
            <script th:inline="javascript">
                //estamos usando uma api gratuita para a consulta de CEPs
                $("#cep").focusout(function () {
                    if ($("#cep").val() === '00000-000' || $("#cep").val() === '11111-111') {
                        cepInvalido();
                    } else {
                        //Início do Comando AJAX
                        $.ajax({
                            //O campo URL diz o caminho de onde virá os dados
                            //É importante concatenar o valor digitado no CEP
                            url: 'https://viacep.com.br/ws/' + $(this).val() + '/json/unicode/',
                            //Aqui você deve preencher o tipo de dados que será lido,
                            //no caso, estamos lendo JSON.
                            dataType: 'json',
                            //SUCESS é referente a função que será executada caso
                            //ele consiga ler a fonte de dados com sucesso.
                            //O parâmetro dentro da função se refere ao nome da variável
                            //que você vai dar para ler esse objeto.
                            success: function (resposta) {
                                //Agora basta definir os valores que você deseja preencher
                                //automaticamente nos campos acima.
                                $("#logradouro").val(resposta.logradouro);
                                $("#complemento").val(resposta.complemento);
                                $("#bairro").val(resposta.bairro);
                                $("#cidade").val(resposta.localidade);
                                $("#estado").val(resposta.uf);
                                //Vamos incluir para que o Número seja focado automaticamente
                                //melhorando a experiência do usuário
                                $("#numero").focus();
                            },
                            error: function (resposta) {
                                cepInvalido();
                            }
                        });
                    }
                });

                function cepInvalido() {
                    alert('Cep inválido');
                    $('#cep').val('');
                    $("#logradouro").val('');
                    $("#complemento").val('');
                    $("#bairro").val('');
                    $("#cidade").val('');
                    $("#uf").val('');
                    $("#cep").focus();
                }
            </script>
        </main>
    </body>
</html>